
define(['jquery','jqueryui','core/str'],function($,jqui,str){str.get_strings([]).done(function(){});return{init:function(){$('#mypublicpage-profile-shortform #mypublicprofile-save-btn').click(function(){var userid=$.trim($('#userid').val());var username=$.trim($('#username').val());var passport=$.trim($('#passport').val());var fullname=$.trim($('#fullname').val());var email=$.trim($('#email').val());var aim=$.trim($('#aim').val());var phone1=$.trim($('#phone1').val());var phone2=$.trim($('#phone2').val());var institution=$.trim($('#institution').val());var address=$.trim($('#address').val());var skype=$.trim($('#skype').val());var icq=$.trim($('#icq').val());var yahoo=$.trim($('#yahoo').val());var birthday=$('#birthday').val();var interests=[];var interestsElements=$('#tag-container .tag-item');if(interestsElements.length){$.map(interestsElements,function(item){interests.push($(item).text());});interests=JSON.stringify(interests);}
$.ajax({type:"POST",async:true,url:M.cfg.wwwroot+'/theme/stardust/mypublic-ajax.php',data:{userid:userid,username:username,passport:passport,fullname:fullname,email:email,aim:aim,phone1:phone1,phone2:phone2,skype:skype,institution:institution,icq:icq,yahoo:yahoo,birthday:birthday,interests:interests,action:'mypublicpage-save-shortform'},success:function(data){alert("Profile is updated");},error:function(requestObject,error,errorThrown){}});});}};});